---
import { ViewTransitions } from 'astro:transitions';

import '../css/base.css';

import '@fontsource/barlow/400.css';
import '@fontsource/barlow/500.css';
import '@fontsource/bebas-neue';

import TopNav from "../components/TopNav.astro";
import SideNav from "../components/SideNav.astro";
import Footer from "../components/Footer.astro";
const { title, drawerClasses } = Astro.props
---
<!doctype html>
<html lang="en" class="scroll-smooth dark" style="color-scheme: dark" data-theme="dark">
<head transition:persist>
    <meta charset="UTF-8" />
    <meta name="description" content="Astro description" />
    <meta name="viewport" content="width=device-width" />
    <meta name="generator" content={Astro.generator} />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <title>{title} | The Pyoneer Project</title>
    <ViewTransitions />
    <script src="https://unpkg.com/htmx.org"></script>
    <script src="https://unpkg.com/hyperscript.org"></script>
</head>
<body class="font-['Barlow']">
{/* Drawer - https://daisyui.com/components/drawer/ */}
<div class:list={['drawer', drawerClasses]}>


    {/* Track the drawer state with a checkbox */}
    <input id="drawer-toggle" class="drawer-toggle" type="checkbox" autocomplete="off" transition:persist />


    <div class="drawer-side lg:max-w-fit !fixed z-10">

        <label for="drawer-toggle" aria-label="close sidebar" class="drawer-overlay lg:hidden"></label>

        <SideNav class="mt-16" />

    </div>


    <div class="drawer-content min-w-full">

        <TopNav transition:persist />

        <main id="content" class="px-6 xs:px-7 animate-fade animate-ease-in animate-duration-75">
            <slot>
                <!-- Page content goes here -->
            </slot>
        </main>

        <Footer class="lg:mt-12" transition:persist />

    </div>
</div>

<script is:inline>
    document.addEventListener('astro:after-swap', () => {
        htmx.process(document.body)
    })
    // window.addEventListener('htmx:afterRequest', () => {
    //     // If "modalUrl" query param is present
    //     if (window.location.search.includes('modalUrl')) {
    //         htmx.ajax('GET', window.location.search.split('modalUrl=')[1], {
    //             target: 'body',
    //             swap: 'beforeend',
    //         })
    //         console.log('modalUrl query param detected')
    //         console.log(window.location.search)
    //     }
    // })
</script>
</body>
</html>

<style is:global>
    /* Keeps <HamburgerButton /> and drawer state in sync */
    .drawer:has(.drawer-toggle:checked) label[for='drawer-toggle'][class*='swap'] {
        @apply swap-active
    }
</style>